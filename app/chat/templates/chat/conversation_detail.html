{% extends "base.html" %}
{% load tz %}
{% load static %}

{% block title %}Conversation{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'chat/conversation.css' %}?v={% now 'U' %}">
{% endblock %}

{% block content %}
<div class="conversation-shell">
  <div class="conversation-messages scroll-container">
    {% for message in session.messages.all %}
      {% if message.role != 1 %}
        <div class="message-row {% if message.role == 2 %}is-user{% else %}is-agent{% endif %}">
          <div class="message-bubble {% if message.role == 2 %}bubble-user{% else %}bubble-agent{% endif %}">{{ message.content|linebreaksbr }}</div>
        </div>
      {% endif %}
    {% empty %}
      <div class="conversation-empty-state">No messages yet.</div>
    {% endfor %}
  </div>

  <form class="conversation-input" method="post">
    {% csrf_token %}
    <input type="text" name="message" placeholder="Enter what you think here..." aria-label="Message input" autocomplete="off">
    <div class="conversation-actions">
      <button class="ghost-button" type="button">+ Add something...</button>
      <button class="primary-button" type="submit">Continue</button>
    </div>
  </form>
</div>
{% endblock %}
